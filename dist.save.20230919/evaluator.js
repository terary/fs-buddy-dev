(()=>{"use strict";var e={1074:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractEvaluator=void 0,t.AbstractEvaluator=class{constructor(e){this._fieldJson=e,this._fieldId=e.id}get fieldId(){return this._fieldId}get fieldJson(){return this._fieldJson}}},8758:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractSubfieldEvaluator=void 0;const r=s(1074);class a extends r.AbstractEvaluator{parseValues(e){const t=this.parseSubmittedData(e);return{[this.fieldId]:t}}parseSubmittedData(e){const t=e[this.fieldId]||[];return t?t.split("\n").map((e=>{const[t,s]=e.split("=");return{subfieldId:(t||"").trim(),value:(s||"").trim()}})):null}evaluateWithValues(e){const t=this.parseSubmittedData(e),s=Array.isArray(t)&&t.reduce(((e,t,s,r)=>(this.supportedSubfieldIds.includes(t.subfieldId)&&(e[t.subfieldId]=t.value),e)),{});return{[this.fieldId]:s}}}t.AbstractSubfieldEvaluator=a},8993:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddressEvaluator=void 0;const r=s(8758);class a extends r.AbstractSubfieldEvaluator{constructor(){super(...arguments),this._supportedSubfieldIds=["address","address2","city","state","zip","country"]}get supportedSubfieldIds(){return this._supportedSubfieldIds}}t.AddressEvaluator=a},1737:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Evaluator=void 0;const r=s(8993),a=s(8186),i=s(1689),d=s(844),u=s(5078),l=s(1511),o=s(7961),n=s(3578),c=s(7470);t.Evaluator=class{static getEvaluatorWithFieldJson(e){switch(e.type){case"address":return new r.AddressEvaluator(e);case"name":return new u.NameEvaluator(e);case"matrix":return new o.MatrixEvaluator(e);case"product":return new c.ProductEvaluator(e);case"number":case"rating":return new d.NumericOnlyEvaluator(e);case"checkbox":case"radio":case"select":return new i.MultiSelectEvaluator(e);case"datetime":case"email":case"file":case"phone":case"signature":case"text":case"textarea":return new a.GenericEvaluator(e);case"creditcard":case"embed":case"richtext":case"section":return new n.NonValueEvaluator(e);default:throw new l.FieldTypeUnknownError(`Unknown field type: '${e.type}'.`)}}}},8186:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericEvaluator=void 0;const r=s(1074);class a extends r.AbstractEvaluator{parseValues(e){return{[this.fieldId]:e[this.fieldId]}}evaluateWithValues(e){return this.parseValues(e)}}t.GenericEvaluator=a},7961:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixEvaluator=void 0;const r=s(1074);class a extends r.AbstractEvaluator{constructor(){super(...arguments),this._supportedSubfieldIds=["first","last","initial","prefix","suffix","middle"]}get supportedSubfieldIds(){return this._supportedSubfieldIds}parseValues(e){const t=this.parseSubmittedData(e);return{[this.fieldId]:t}}parseSubmittedData(e){const t=e[this.fieldId]||[];return t?t.split("\n").map((e=>{const[t,s]=e.split("=");return{subfieldId:(t||"").trim(),value:(s||"").trim()}})):null}evaluateWithValues(e){const t=this.parseSubmittedData(e),s=Array.isArray(t)&&t.reduce(((e,t,s,r)=>(e[t.subfieldId]=t.value,e)),{});return{[this.fieldId]:s}}}t.MatrixEvaluator=a},1689:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectEvaluator=void 0;const r=s(8648),a=s(1074);class i extends a.AbstractEvaluator{parseValues(e){const t=(this.fieldJson.options||[]).find((t=>t.value===e[this.fieldId]));return{[this.fieldId]:null==t?void 0:t.value}}evaluateWithValues(e){const t=this.parseValues(e)[this.fieldId];return void 0===t?{[this.fieldId]:new r.InvalidEvaluation("Selected option not found.",{options:this.fieldJson.options||[],searchValue:e[this.fieldId]})}:{[this.fieldId]:t}}evaluateMultiSelect(e){const t=this.fieldJson.options||[],s=t.find((t=>t.value===e[this.fieldId]));return void 0===s?{[this.fieldId]:new r.InvalidEvaluation("Selected option not found.",{options:t,searchValue:e[this.fieldId]})}:{[this.fieldId]:s.value}}}t.MultiSelectEvaluator=i},5078:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NameEvaluator=void 0;const r=s(8758);class a extends r.AbstractSubfieldEvaluator{constructor(){super(...arguments),this._supportedSubfieldIds=["first","last","initial","prefix","suffix","middle"]}get supportedSubfieldIds(){return this._supportedSubfieldIds}}t.NameEvaluator=a},3578:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonValueEvaluator=void 0;const r=s(1074);class a extends r.AbstractEvaluator{parseValues(e){return{[this.fieldId]:e[this.fieldId]}}evaluateWithValues(e){return{[this.fieldId]:null}}}t.NonValueEvaluator=a},844:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumericOnlyEvaluator=void 0;const r=s(8648),a=s(1074);class i extends a.AbstractEvaluator{parseValues(e){return{[this.fieldId]:e[this.fieldId]}}evaluateWithValues(e){return t=e[this.fieldId],Number(t)==t?{[this.fieldId]:e[this.fieldId]}:{[this.fieldId]:new r.InvalidEvaluation(`Could not convert to number: '${e[this.fieldId]}', fieldId: ${this.fieldId}.`)};var t}}t.NumericOnlyEvaluator=i},7470:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProductEvaluator=void 0;const r=s(8758);class a extends r.AbstractSubfieldEvaluator{constructor(){super(...arguments),this._supportedSubfieldIds=["charge_type","quantity","unit_price","total"]}get supportedSubfieldIds(){return this._supportedSubfieldIds}}t.ProductEvaluator=a},8648:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidEvaluation=void 0,t.InvalidEvaluation=class{constructor(e,t){this._message=e,this._payload=t}get message(){return this._message}get payload(){return this._payload}}},1511:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldTypeUnknownError=void 0;class s extends Error{constructor(e,t){super(e),this._debugObject=t,this.name=this.constructor.name}get code(){return"ERR_UNKNOWN_FIELD_TYPE"}get debugObject(){return this._debugObject}}t.FieldTypeUnknownError=s}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}(()=>{const e=s(1737);s(1737);e.Evaluator})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixpQ0FBaUN6QyxFQUFPUCxLQUFLSSx1QkFDM0NKLEtBQUtJLGFBakJVLElBQUNjLENBcUJ4QixFQUdPLEVBQUFvQixxQkFBQUEsQyw0RkN6QlQsZ0JBR0EsTUFBTUQsVUFBeUIsRUFBQWhDLDBCQUEvQixjLG9CQUdVLEtBQUEwQixzQkFBd0IsQ0FDOUIsY0FDQSxXQUNBLGFBQ0EsUUFNSixDQUhNSCwyQkFDRixPQUFPNUIsS0FBSytCLHFCQUNkLEVBR08sRUFBQU0saUJBQUFBLEMsMkZDSkEsRUFBQVcsa0JBaEJULE1BR0VsRCxZQUFZc0QsRUFBaUJDLEdBQzNCckQsS0FBS3NELFNBQVdGLEVBQ2hCcEQsS0FBS3VELFNBQVdGLENBQ2xCLENBRUlELGNBQ0YsT0FBT3BELEtBQUtzRCxRQUNkLENBRUlELGNBQ0YsT0FBT3JELEtBQUt1RCxRQUNkLEUsK0ZDZEYsTUFBTWIsVUFBOEJjLE1BRWxDMUQsWUFBWXNELEVBQWlCSyxHQUMzQkMsTUFBTU4sR0FDTnBELEtBQUsyRCxhQUFlRixFQUNwQnpELEtBQUs0RCxLQUFPNUQsS0FBS0YsWUFBWThELElBQy9CLENBRUlDLFdBQ0YsTUFBTyx3QkFDVCxDQUNJSixrQkFDRixPQUFPekQsS0FBSzJELFlBQ2QsRUFFTyxFQUFBakIsc0JBQUFBLEMsR0NkTG9CLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQmpCLElBQWpCa0IsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JKLEdBQVVHLEVBQVFBLEVBQU9ELFFBQVNILEdBRy9DSSxFQUFPRCxPQUNmLEMsTUN0QkEsZ0JBRUEsUUFFcUMsRUFBQWxDLFMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcy1mb3JtLWJ1aWxkZXItYnVkZHkvLi9zcmMvZm9ybXN0YWNrL2NsYXNzZXMvRXZhbHVhdG9yL0Fic3RyYWN0RXZhbHVhdG9yLnRzIiwid2VicGFjazovL2ZzLWZvcm0tYnVpbGRlci1idWRkeS8uL3NyYy9mb3Jtc3RhY2svY2xhc3Nlcy9FdmFsdWF0b3IvQWJzdHJhY3RTdWJmaWVsZEV2YWx1YXRvci50cyIsIndlYnBhY2s6Ly9mcy1mb3JtLWJ1aWxkZXItYnVkZHkvLi9zcmMvZm9ybXN0YWNrL2NsYXNzZXMvRXZhbHVhdG9yL0FkZHJlc3NFdmFsdWF0b3IudHMiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0V2YWx1YXRvci9FdmFsdWF0b3IudHMiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0V2YWx1YXRvci9HZW5lcmljRXZhbHVhdG9yLnRzIiwid2VicGFjazovL2ZzLWZvcm0tYnVpbGRlci1idWRkeS8uL3NyYy9mb3Jtc3RhY2svY2xhc3Nlcy9FdmFsdWF0b3IvTWF0cml4RXZhbHVhdG9yLnRzIiwid2VicGFjazovL2ZzLWZvcm0tYnVpbGRlci1idWRkeS8uL3NyYy9mb3Jtc3RhY2svY2xhc3Nlcy9FdmFsdWF0b3IvTXVsdGlTZWxlY3RFdmFsdWF0b3IudHMiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0V2YWx1YXRvci9OYW1lRXZhbHVhdG9yLnRzIiwid2VicGFjazovL2ZzLWZvcm0tYnVpbGRlci1idWRkeS8uL3NyYy9mb3Jtc3RhY2svY2xhc3Nlcy9FdmFsdWF0b3IvTm9uVmFsdWVFdmFsdWF0b3IudHMiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0V2YWx1YXRvci9OdW1lcmljT25seUV2YWx1YXRvci50cyIsIndlYnBhY2s6Ly9mcy1mb3JtLWJ1aWxkZXItYnVkZHkvLi9zcmMvZm9ybXN0YWNrL2NsYXNzZXMvRXZhbHVhdG9yL1Byb2R1Y3RFdmFsdWF0b3IudHMiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0ludmFsaWRFdmFsdWF0aW9uLnRzIiwid2VicGFjazovL2ZzLWZvcm0tYnVpbGRlci1idWRkeS8uL3NyYy9mb3Jtc3RhY2svZXJyb3JzL0ZpZWxkVHlwZVVua25vd25FcnJvci50cyIsIndlYnBhY2s6Ly9mcy1mb3JtLWJ1aWxkZXItYnVkZHkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZnMtZm9ybS1idWlsZGVyLWJ1ZGR5Ly4vc3JjL2Zvcm1zdGFjay9jbGFzc2VzL0V2YWx1YXRvci9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBURnNGaWVsZEFueSB9IGZyb20gXCIuLi8uLi90eXBlLmZpZWxkXCI7XG5pbXBvcnQgeyBJbnZhbGlkRXZhbHVhdGlvbiB9IGZyb20gXCIuLi9JbnZhbGlkRXZhbHVhdGlvblwiO1xuaW1wb3J0IHsgSUVWYWx1YXRvciB9IGZyb20gXCIuL0lFdmFsdWF0b3JcIjtcbmltcG9ydCB7IFRFdmFsdWF0ZVJlcXVlc3QsIFRFdmFsdWF0ZVJlc3BvbnNlIH0gZnJvbSBcIi4vdHlwZVwiO1xuXG5hYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEV2YWx1YXRvciBpbXBsZW1lbnRzIElFVmFsdWF0b3Ige1xuICBwcml2YXRlIF9maWVsZEpzb246IFRGc0ZpZWxkQW55O1xuICBwcml2YXRlIF9maWVsZElkOiBzdHJpbmc7XG4gIGNvbnN0cnVjdG9yKGZpZWxkSnNvbjogVEZzRmllbGRBbnkpIHtcbiAgICB0aGlzLl9maWVsZEpzb24gPSBmaWVsZEpzb247XG4gICAgdGhpcy5fZmllbGRJZCA9IGZpZWxkSnNvbi5pZDtcbiAgfVxuXG4gIGdldCBmaWVsZElkKCkge1xuICAgIHJldHVybiB0aGlzLl9maWVsZElkO1xuICB9XG4gIGdldCBmaWVsZEpzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkSnNvbjtcbiAgfVxuXG4gIGFic3RyYWN0IHBhcnNlVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+O1xuXG4gIGFic3RyYWN0IGV2YWx1YXRlV2l0aFZhbHVlczxUPihcbiAgICB2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3RcbiAgKTogVEV2YWx1YXRlUmVzcG9uc2U8VD47XG59XG5leHBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9O1xuIiwiaW1wb3J0IHsgVEZzRmllbGRBZGRyZXNzIH0gZnJvbSBcIi4uLy4uL3R5cGUuZmllbGRcIjtcbmltcG9ydCB7IEFic3RyYWN0RXZhbHVhdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RFdmFsdWF0b3JcIjtcbmltcG9ydCB7IFRFdmFsdWF0ZVJlcXVlc3QsIFRFdmFsdWF0ZVJlc3BvbnNlIH0gZnJvbSBcIi4vdHlwZVwiO1xuXG5hYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yIGV4dGVuZHMgQWJzdHJhY3RFdmFsdWF0b3Ige1xuICBhYnN0cmFjdCBnZXQgc3VwcG9ydGVkU3ViZmllbGRJZHMoKTogc3RyaW5nW107XG5cbiAgcGFyc2VWYWx1ZXM8VD4odmFsdWVzOiBURXZhbHVhdGVSZXF1ZXN0KTogVEV2YWx1YXRlUmVzcG9uc2U8VD4ge1xuICAgIGNvbnN0IHMyID0gdGhpcy5wYXJzZVN1Ym1pdHRlZERhdGEodmFsdWVzKTtcbiAgICByZXR1cm4geyBbdGhpcy5maWVsZElkXTogczIgYXMgVCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZVN1Ym1pdHRlZERhdGEodmFsdWVzOiBURXZhbHVhdGVSZXF1ZXN0KSB7XG4gICAgY29uc3Qgc3VibWlzc2lvbkRhdGEgPSB2YWx1ZXNbdGhpcy5maWVsZElkXSB8fCBbXTtcbiAgICBpZiAoIXN1Ym1pc3Npb25EYXRhKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVjb3JkcyA9IHN1Ym1pc3Npb25EYXRhLnNwbGl0KFwiXFxuXCIpO1xuXG4gICAgcmV0dXJuIHJlY29yZHMubWFwKChmaWVsZDogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBbc3ViZmllbGRJZFJhdywgdmFsdWVSYXddID0gZmllbGQuc3BsaXQoXCI9XCIpO1xuICAgICAgY29uc3Qgc3ViZmllbGRJZCA9IChzdWJmaWVsZElkUmF3IHx8IFwiXCIpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gKHZhbHVlUmF3IHx8IFwiXCIpLnRyaW0oKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3ViZmllbGRJZCxcbiAgICAgICAgdmFsdWUsXG4gICAgICB9O1xuICAgIH0pIGFzIFt7IHN1YmZpZWxkSWQ6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9XTtcbiAgfVxuXG4gIGV2YWx1YXRlV2l0aFZhbHVlczxUPih2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3QpOiBURXZhbHVhdGVSZXNwb25zZTxUPiB7XG4gICAgY29uc3QgczEgPSB0aGlzLnBhcnNlU3VibWl0dGVkRGF0YSh2YWx1ZXMpO1xuICAgIGNvbnN0IHMyID1cbiAgICAgIEFycmF5LmlzQXJyYXkoczEpICYmXG4gICAgICBzMS5yZWR1Y2UoKHByZXYsIGN1ciwgaSwgYSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWRTdWJmaWVsZElkcy5pbmNsdWRlcyhjdXIuc3ViZmllbGRJZCkpIHtcbiAgICAgICAgICBwcmV2W2N1ci5zdWJmaWVsZElkXSA9IGN1ci52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9IGFzIHsgW3N1YmZpZWxkSWQ6IHN0cmluZ106IHN0cmluZyB9KTtcblxuICAgIC8vIHJldHVybiBzMjtcblxuICAgIHJldHVybiB7IFt0aGlzLmZpZWxkSWRdOiBzMiBhcyBUIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgQWJzdHJhY3RTdWJmaWVsZEV2YWx1YXRvciB9O1xuIiwiaW1wb3J0IHsgVEZzRmllbGRBZGRyZXNzIH0gZnJvbSBcIi4uLy4uL3R5cGUuZmllbGRcIjtcbmltcG9ydCB7IEFic3RyYWN0RXZhbHVhdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RFdmFsdWF0b3JcIjtcbmltcG9ydCB7IEFic3RyYWN0U3ViZmllbGRFdmFsdWF0b3IgfSBmcm9tIFwiLi9BYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBURXZhbHVhdGVSZXF1ZXN0LCBURXZhbHVhdGVSZXNwb25zZSB9IGZyb20gXCIuL3R5cGVcIjtcblxuY2xhc3MgQWRkcmVzc0V2YWx1YXRvciBleHRlbmRzIEFic3RyYWN0U3ViZmllbGRFdmFsdWF0b3Ige1xuICBwcml2YXRlIF9zdXBwb3J0ZWRTdWJmaWVsZElkcyA9IFtcbiAgICBcImFkZHJlc3NcIixcbiAgICBcImFkZHJlc3MyXCIsXG4gICAgXCJjaXR5XCIsXG4gICAgXCJzdGF0ZVwiLFxuICAgIFwiemlwXCIsXG4gICAgXCJjb3VudHJ5XCIsXG4gIF07XG5cbiAgZ2V0IHN1cHBvcnRlZFN1YmZpZWxkSWRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRTdWJmaWVsZElkcztcbiAgfVxufVxuXG5leHBvcnQgeyBBZGRyZXNzRXZhbHVhdG9yIH07XG4iLCJpbXBvcnQgeyBURnNGaWVsZEFueSB9IGZyb20gXCIuLi8uLi90eXBlLmZpZWxkXCI7XG5pbXBvcnQgeyBBZGRyZXNzRXZhbHVhdG9yIH0gZnJvbSBcIi4vQWRkcmVzc0V2YWx1YXRvclwiO1xuaW1wb3J0IHsgR2VuZXJpY0V2YWx1YXRvciB9IGZyb20gXCIuL0dlbmVyaWNFdmFsdWF0b3JcIjtcbmltcG9ydCB7IElFVmFsdWF0b3IgfSBmcm9tIFwiLi9JRXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBNdWx0aVNlbGVjdEV2YWx1YXRvciB9IGZyb20gXCIuL011bHRpU2VsZWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBOdW1lcmljT25seUV2YWx1YXRvciB9IGZyb20gXCIuL051bWVyaWNPbmx5RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBOYW1lRXZhbHVhdG9yIH0gZnJvbSBcIi4vTmFtZUV2YWx1YXRvclwiO1xuaW1wb3J0IHsgRmllbGRUeXBlVW5rbm93bkVycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9ycy9GaWVsZFR5cGVVbmtub3duRXJyb3JcIjtcbmltcG9ydCB7IE1hdHJpeEV2YWx1YXRvciB9IGZyb20gXCIuL01hdHJpeEV2YWx1YXRvclwiO1xuaW1wb3J0IHsgTm9uVmFsdWVFdmFsdWF0b3IgfSBmcm9tIFwiLi9Ob25WYWx1ZUV2YWx1YXRvclwiO1xuaW1wb3J0IHsgUHJvZHVjdEV2YWx1YXRvciB9IGZyb20gXCIuL1Byb2R1Y3RFdmFsdWF0b3JcIjtcblxuY2xhc3MgRXZhbHVhdG9yIHtcbiAgc3RhdGljIGdldEV2YWx1YXRvcldpdGhGaWVsZEpzb24oZmllbGRKc29uOiBURnNGaWVsZEFueSk6IElFVmFsdWF0b3Ige1xuICAgIHN3aXRjaCAoZmllbGRKc29uLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJhZGRyZXNzXCI6XG4gICAgICAgIHJldHVybiBuZXcgQWRkcmVzc0V2YWx1YXRvcihmaWVsZEpzb24pO1xuICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBOYW1lRXZhbHVhdG9yKGZpZWxkSnNvbik7XG4gICAgICBjYXNlIFwibWF0cml4XCI6XG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4RXZhbHVhdG9yKGZpZWxkSnNvbik7XG4gICAgICBjYXNlIFwicHJvZHVjdFwiOlxuICAgICAgICByZXR1cm4gbmV3IFByb2R1Y3RFdmFsdWF0b3IoZmllbGRKc29uKTtcblxuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgY2FzZSBcInJhdGluZ1wiOlxuICAgICAgICByZXR1cm4gbmV3IE51bWVyaWNPbmx5RXZhbHVhdG9yKGZpZWxkSnNvbik7XG5cbiAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgY2FzZSBcInJhZGlvXCI6XG4gICAgICBjYXNlIFwic2VsZWN0XCI6XG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlTZWxlY3RFdmFsdWF0b3IoZmllbGRKc29uKTtcblxuICAgICAgY2FzZSBcImRhdGV0aW1lXCI6XG4gICAgICBjYXNlIFwiZW1haWxcIjpcbiAgICAgIGNhc2UgXCJmaWxlXCI6XG4gICAgICBjYXNlIFwicGhvbmVcIjpcbiAgICAgIGNhc2UgXCJzaWduYXR1cmVcIjpcbiAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICBjYXNlIFwidGV4dGFyZWFcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljRXZhbHVhdG9yKGZpZWxkSnNvbik7XG5cbiAgICAgIGNhc2UgXCJjcmVkaXRjYXJkXCI6XG4gICAgICBjYXNlIFwiZW1iZWRcIjpcbiAgICAgIGNhc2UgXCJyaWNodGV4dFwiOlxuICAgICAgY2FzZSBcInNlY3Rpb25cIjpcbiAgICAgICAgcmV0dXJuIG5ldyBOb25WYWx1ZUV2YWx1YXRvcihmaWVsZEpzb24pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRmllbGRUeXBlVW5rbm93bkVycm9yKFxuICAgICAgICAgIGBVbmtub3duIGZpZWxkIHR5cGU6ICcke2ZpZWxkSnNvbi50eXBlfScuYFxuICAgICAgICApO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHsgRXZhbHVhdG9yIH07XG4iLCJpbXBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9IGZyb20gXCIuL0Fic3RyYWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBURXZhbHVhdGVSZXF1ZXN0LCBURXZhbHVhdGVSZXNwb25zZSB9IGZyb20gXCIuL3R5cGVcIjtcblxuY2xhc3MgR2VuZXJpY0V2YWx1YXRvciBleHRlbmRzIEFic3RyYWN0RXZhbHVhdG9yIHtcbiAgcGFyc2VWYWx1ZXM8VD4odmFsdWVzOiBURXZhbHVhdGVSZXF1ZXN0KTogVEV2YWx1YXRlUmVzcG9uc2U8VD4ge1xuICAgIHJldHVybiB7IFt0aGlzLmZpZWxkSWRdOiB2YWx1ZXNbdGhpcy5maWVsZElkXSBhcyBUIH07XG4gIH1cbiAgZXZhbHVhdGVXaXRoVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZVZhbHVlcyh2YWx1ZXMpO1xuICB9XG59XG5cbmV4cG9ydCB7IEdlbmVyaWNFdmFsdWF0b3IgfTtcbiIsImltcG9ydCB7IFRGc0ZpZWxkQWRkcmVzcyB9IGZyb20gXCIuLi8uLi90eXBlLmZpZWxkXCI7XG5pbXBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9IGZyb20gXCIuL0Fic3RyYWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBURXZhbHVhdGVSZXF1ZXN0LCBURXZhbHVhdGVSZXNwb25zZSB9IGZyb20gXCIuL3R5cGVcIjtcblxuY2xhc3MgTWF0cml4RXZhbHVhdG9yIGV4dGVuZHMgQWJzdHJhY3RFdmFsdWF0b3Ige1xuICBwcml2YXRlIF9zdXBwb3J0ZWRTdWJmaWVsZElkcyA9IFtcbiAgICBcImZpcnN0XCIsXG4gICAgXCJsYXN0XCIsXG4gICAgXCJpbml0aWFsXCIsXG4gICAgXCJwcmVmaXhcIixcbiAgICBcInN1ZmZpeFwiLFxuICAgIFwibWlkZGxlXCIsXG4gIF07XG5cbiAgZ2V0IHN1cHBvcnRlZFN1YmZpZWxkSWRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRTdWJmaWVsZElkcztcbiAgfVxuXG4gIHBhcnNlVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+IHtcbiAgICBjb25zdCBzMiA9IHRoaXMucGFyc2VTdWJtaXR0ZWREYXRhKHZhbHVlcyk7XG4gICAgcmV0dXJuIHsgW3RoaXMuZmllbGRJZF06IHMyIGFzIFQgfTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJtaXR0ZWREYXRhKHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCkge1xuICAgIGNvbnN0IHN1Ym1pc3Npb25EYXRhID0gdmFsdWVzW3RoaXMuZmllbGRJZF0gfHwgW107XG4gICAgaWYgKCFzdWJtaXNzaW9uRGF0YSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZHMgPSBzdWJtaXNzaW9uRGF0YS5zcGxpdChcIlxcblwiKTtcblxuICAgIHJldHVybiByZWNvcmRzLm1hcCgoZmllbGQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgW3N1YmZpZWxkSWRSYXcsIHZhbHVlUmF3XSA9IGZpZWxkLnNwbGl0KFwiPVwiKTtcbiAgICAgIGNvbnN0IHN1YmZpZWxkSWQgPSAoc3ViZmllbGRJZFJhdyB8fCBcIlwiKS50cmltKCk7XG4gICAgICBjb25zdCB2YWx1ZSA9ICh2YWx1ZVJhdyB8fCBcIlwiKS50cmltKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1YmZpZWxkSWQsXG4gICAgICAgIHZhbHVlLFxuICAgICAgfTtcbiAgICB9KSBhcyBbeyBzdWJmaWVsZElkOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfV07XG4gIH1cblxuICBldmFsdWF0ZVdpdGhWYWx1ZXM8VD4odmFsdWVzOiBURXZhbHVhdGVSZXF1ZXN0KTogVEV2YWx1YXRlUmVzcG9uc2U8VD4ge1xuICAgIGNvbnN0IHMxID0gdGhpcy5wYXJzZVN1Ym1pdHRlZERhdGEodmFsdWVzKTtcbiAgICBjb25zdCBzMiA9XG4gICAgICBBcnJheS5pc0FycmF5KHMxKSAmJlxuICAgICAgczEucmVkdWNlKChwcmV2LCBjdXIsIGksIGEpID0+IHtcbiAgICAgICAgcHJldltjdXIuc3ViZmllbGRJZF0gPSBjdXIudmFsdWU7XG4gICAgICAgIC8vIGlmICh0aGlzLl9zdXBwb3J0ZWRTdWJmaWVsZElkcy5pbmNsdWRlcyhjdXIuc3ViZmllbGRJZCkpIHtcbiAgICAgICAgLy8gICBwcmV2W2N1ci5zdWJmaWVsZElkXSA9IGN1ci52YWx1ZTtcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9IGFzIHsgW3N1YmZpZWxkSWQ6IHN0cmluZ106IHN0cmluZyB9KTtcblxuICAgIC8vIHJldHVybiBzMjtcblxuICAgIHJldHVybiB7IFt0aGlzLmZpZWxkSWRdOiBzMiBhcyBUIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgTWF0cml4RXZhbHVhdG9yIH07XG4iLCJpbXBvcnQge1xuICBURnNGaWVsZENoZWNrYm94LFxuICBURnNGaWVsZFJhZGlvLFxuICBURnNGaWVsZFNlbGVjdCxcbn0gZnJvbSBcIi4uLy4uL3R5cGUuZmllbGRcIjtcbmltcG9ydCB7IEludmFsaWRFdmFsdWF0aW9uIH0gZnJvbSBcIi4uL0ludmFsaWRFdmFsdWF0aW9uXCI7XG5pbXBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9IGZyb20gXCIuL0Fic3RyYWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBURXZhbHVhdGVSZXF1ZXN0LCBURXZhbHVhdGVSZXNwb25zZSB9IGZyb20gXCIuL3R5cGVcIjtcblxudHlwZSBUU2VsZWN0RmllbGRzID0gVEZzRmllbGRSYWRpbyB8IFRGc0ZpZWxkU2VsZWN0IHwgVEZzRmllbGRDaGVja2JveDtcblxuY2xhc3MgTXVsdGlTZWxlY3RFdmFsdWF0b3IgZXh0ZW5kcyBBYnN0cmFjdEV2YWx1YXRvciB7XG4gIHBhcnNlVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+IHtcbiAgICBjb25zdCBvcHRpb25zID0gKHRoaXMuZmllbGRKc29uIGFzIFRTZWxlY3RGaWVsZHMpLm9wdGlvbnMgfHwgW107XG4gICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zLmZpbmQoXG4gICAgICAob3B0aW9uKSA9PiBvcHRpb24udmFsdWUgPT09IHZhbHVlc1t0aGlzLmZpZWxkSWRdXG4gICAgKTtcblxuICAgIHJldHVybiB7IFt0aGlzLmZpZWxkSWRdOiBzZWxlY3RlZE9wdGlvbj8udmFsdWUgYXMgVCB9O1xuICB9XG5cbiAgZXZhbHVhdGVXaXRoVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+IHtcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IHRoaXMucGFyc2VWYWx1ZXModmFsdWVzKVt0aGlzLmZpZWxkSWRdO1xuICAgIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBbdGhpcy5maWVsZElkXTogbmV3IEludmFsaWRFdmFsdWF0aW9uKFwiU2VsZWN0ZWQgb3B0aW9uIG5vdCBmb3VuZC5cIiwge1xuICAgICAgICAgIG9wdGlvbnM6ICh0aGlzLmZpZWxkSnNvbiBhcyBUU2VsZWN0RmllbGRzKS5vcHRpb25zIHx8IFtdLFxuICAgICAgICAgIHNlYXJjaFZhbHVlOiB2YWx1ZXNbdGhpcy5maWVsZElkXSxcbiAgICAgICAgfSksXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBbdGhpcy5maWVsZElkXTogc2VsZWN0ZWRPcHRpb24gYXMgVCB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXZhbHVhdGVNdWx0aVNlbGVjdDxUPihcbiAgICB2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3RcbiAgKTogVEV2YWx1YXRlUmVzcG9uc2U8VD4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSAodGhpcy5maWVsZEpzb24gYXMgVFNlbGVjdEZpZWxkcykub3B0aW9ucyB8fCBbXTtcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnMuZmluZChcbiAgICAgIChvcHRpb24pID0+IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWVzW3RoaXMuZmllbGRJZF1cbiAgICApO1xuXG4gICAgaWYgKHNlbGVjdGVkT3B0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIFt0aGlzLmZpZWxkSWRdOiBuZXcgSW52YWxpZEV2YWx1YXRpb24oXCJTZWxlY3RlZCBvcHRpb24gbm90IGZvdW5kLlwiLCB7XG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICBzZWFyY2hWYWx1ZTogdmFsdWVzW3RoaXMuZmllbGRJZF0sXG4gICAgICAgIH0pLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgW3RoaXMuZmllbGRJZF06IHNlbGVjdGVkT3B0aW9uLnZhbHVlIGFzIFQgfTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgTXVsdGlTZWxlY3RFdmFsdWF0b3IgfTtcbiIsImltcG9ydCB7IFRGc0ZpZWxkQWRkcmVzcyB9IGZyb20gXCIuLi8uLi90eXBlLmZpZWxkXCI7XG5pbXBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9IGZyb20gXCIuL0Fic3RyYWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBBYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RTdWJmaWVsZEV2YWx1YXRvclwiO1xuaW1wb3J0IHsgVEV2YWx1YXRlUmVxdWVzdCwgVEV2YWx1YXRlUmVzcG9uc2UgfSBmcm9tIFwiLi90eXBlXCI7XG5cbmNsYXNzIE5hbWVFdmFsdWF0b3IgZXh0ZW5kcyBBYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yIHtcbiAgcHJpdmF0ZSBfc3VwcG9ydGVkU3ViZmllbGRJZHMgPSBbXG4gICAgXCJmaXJzdFwiLFxuICAgIFwibGFzdFwiLFxuICAgIFwiaW5pdGlhbFwiLFxuICAgIFwicHJlZml4XCIsXG4gICAgXCJzdWZmaXhcIixcbiAgICBcIm1pZGRsZVwiLFxuICBdO1xuXG4gIGdldCBzdXBwb3J0ZWRTdWJmaWVsZElkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc3VwcG9ydGVkU3ViZmllbGRJZHM7XG4gIH1cbn1cblxuZXhwb3J0IHsgTmFtZUV2YWx1YXRvciB9O1xuIiwiaW1wb3J0IHsgQWJzdHJhY3RFdmFsdWF0b3IgfSBmcm9tIFwiLi9BYnN0cmFjdEV2YWx1YXRvclwiO1xuaW1wb3J0IHsgVEV2YWx1YXRlUmVxdWVzdCwgVEV2YWx1YXRlUmVzcG9uc2UgfSBmcm9tIFwiLi90eXBlXCI7XG5cbmNsYXNzIE5vblZhbHVlRXZhbHVhdG9yIGV4dGVuZHMgQWJzdHJhY3RFdmFsdWF0b3Ige1xuICBwYXJzZVZhbHVlczxUPih2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3QpOiBURXZhbHVhdGVSZXNwb25zZTxUPiB7XG4gICAgcmV0dXJuIHsgW3RoaXMuZmllbGRJZF06IHZhbHVlc1t0aGlzLmZpZWxkSWRdIH07XG4gIH1cblxuICBldmFsdWF0ZVdpdGhWYWx1ZXM8VD4odmFsdWVzOiBURXZhbHVhdGVSZXF1ZXN0KTogVEV2YWx1YXRlUmVzcG9uc2U8VD47XG4gIGV2YWx1YXRlV2l0aFZhbHVlcyh2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3QpOiBURXZhbHVhdGVSZXNwb25zZTxudWxsPiB7XG4gICAgcmV0dXJuIHsgW3RoaXMuZmllbGRJZF06IG51bGwgfTtcbiAgfVxufVxuXG5leHBvcnQgeyBOb25WYWx1ZUV2YWx1YXRvciB9O1xuIiwiaW1wb3J0IHsgSW52YWxpZEV2YWx1YXRpb24gfSBmcm9tIFwiLi4vSW52YWxpZEV2YWx1YXRpb25cIjtcbmltcG9ydCB7IEFic3RyYWN0RXZhbHVhdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RFdmFsdWF0b3JcIjtcbmltcG9ydCB7IFRFdmFsdWF0ZVJlcXVlc3QsIFRFdmFsdWF0ZVJlc3BvbnNlIH0gZnJvbSBcIi4vdHlwZVwiO1xuY29uc3QgaXNOdW1lcmljTG9vc2VseSA9ICh2YWx1ZTogYW55KSA9PiB7XG4gIHJldHVybiBOdW1iZXIodmFsdWUpID09IHZhbHVlO1xufTtcblxuY2xhc3MgTnVtZXJpY09ubHlFdmFsdWF0b3IgZXh0ZW5kcyBBYnN0cmFjdEV2YWx1YXRvciB7XG4gIHBhcnNlVmFsdWVzPFQ+KHZhbHVlczogVEV2YWx1YXRlUmVxdWVzdCk6IFRFdmFsdWF0ZVJlc3BvbnNlPFQ+IHtcbiAgICByZXR1cm4geyBbdGhpcy5maWVsZElkXTogdmFsdWVzW3RoaXMuZmllbGRJZF0gfTtcbiAgfVxuXG4gIGV2YWx1YXRlV2l0aFZhbHVlczxUPih2YWx1ZXM6IFRFdmFsdWF0ZVJlcXVlc3QpOiBURXZhbHVhdGVSZXNwb25zZTxUPiB7XG4gICAgaWYgKGlzTnVtZXJpY0xvb3NlbHkodmFsdWVzW3RoaXMuZmllbGRJZF0pKSB7XG4gICAgICByZXR1cm4geyBbdGhpcy5maWVsZElkXTogdmFsdWVzW3RoaXMuZmllbGRJZF0gfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgW3RoaXMuZmllbGRJZF06IG5ldyBJbnZhbGlkRXZhbHVhdGlvbihcbiAgICAgICAgYENvdWxkIG5vdCBjb252ZXJ0IHRvIG51bWJlcjogJyR7dmFsdWVzW3RoaXMuZmllbGRJZF19JywgZmllbGRJZDogJHtcbiAgICAgICAgICB0aGlzLmZpZWxkSWRcbiAgICAgICAgfS5gXG4gICAgICApLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgTnVtZXJpY09ubHlFdmFsdWF0b3IgfTtcbiIsImltcG9ydCB7IFRGc0ZpZWxkQWRkcmVzcyB9IGZyb20gXCIuLi8uLi90eXBlLmZpZWxkXCI7XG5pbXBvcnQgeyBBYnN0cmFjdEV2YWx1YXRvciB9IGZyb20gXCIuL0Fic3RyYWN0RXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBBYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yIH0gZnJvbSBcIi4vQWJzdHJhY3RTdWJmaWVsZEV2YWx1YXRvclwiO1xuaW1wb3J0IHsgVEV2YWx1YXRlUmVxdWVzdCwgVEV2YWx1YXRlUmVzcG9uc2UgfSBmcm9tIFwiLi90eXBlXCI7XG5cbmNsYXNzIFByb2R1Y3RFdmFsdWF0b3IgZXh0ZW5kcyBBYnN0cmFjdFN1YmZpZWxkRXZhbHVhdG9yIHtcbiAgLy8gICAgLy8gICAgIFwidmFsdWVcIjogXCJjaGFyZ2VfdHlwZSA9IGZpeGVkX2Ftb3VudFxcbnF1YW50aXR5ID0gN1xcbnVuaXRfcHJpY2UgPSAzLjk5XFxudG90YWwgPSAyNy45M1wiXG5cbiAgcHJpdmF0ZSBfc3VwcG9ydGVkU3ViZmllbGRJZHMgPSBbXG4gICAgXCJjaGFyZ2VfdHlwZVwiLFxuICAgIFwicXVhbnRpdHlcIixcbiAgICBcInVuaXRfcHJpY2VcIixcbiAgICBcInRvdGFsXCIsXG4gIF07XG5cbiAgZ2V0IHN1cHBvcnRlZFN1YmZpZWxkSWRzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRTdWJmaWVsZElkcztcbiAgfVxufVxuXG5leHBvcnQgeyBQcm9kdWN0RXZhbHVhdG9yIH07XG4iLCJjbGFzcyBJbnZhbGlkRXZhbHVhdGlvbiB7XG4gIHByaXZhdGUgX21lc3NhZ2U6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGF5bG9hZDogYW55O1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHBheWxvYWQ/OiBhbnkpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLl9wYXlsb2FkID0gcGF5bG9hZDtcbiAgfVxuXG4gIGdldCBtZXNzYWdlKCkge1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlO1xuICB9XG5cbiAgZ2V0IHBheWxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BheWxvYWQ7XG4gIH1cbn1cbmV4cG9ydCB7IEludmFsaWRFdmFsdWF0aW9uIH07XG4iLCJjbGFzcyBGaWVsZFR5cGVVbmtub3duRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHByaXZhdGUgX2RlYnVnT2JqZWN0PzogYW55O1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGRlYnVnT2JqZWN0PzogYW55KSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5fZGVidWdPYmplY3QgPSBkZWJ1Z09iamVjdDtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7IC8vIEkgd29uZGVyIGlmIHRoaXMgaXMgdXNlZnVsXG4gIH1cblxuICBnZXQgY29kZSgpIHtcbiAgICByZXR1cm4gXCJFUlJfVU5LTk9XTl9GSUVMRF9UWVBFXCI7XG4gIH1cbiAgZ2V0IGRlYnVnT2JqZWN0KCkge1xuICAgIHJldHVybiB0aGlzLl9kZWJ1Z09iamVjdDtcbiAgfVxufVxuZXhwb3J0IHsgRmllbGRUeXBlVW5rbm93bkVycm9yIH07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiaW1wb3J0IHsgRXZhbHVhdG9yIH0gZnJvbSBcIi4vRXZhbHVhdG9yXCI7XG5cbmV4cG9ydCB7IEV2YWx1YXRvciB9IGZyb20gXCIuL0V2YWx1YXRvclwiO1xuXG5leHBvcnQgY29uc3Qgd2ViSW50ZXJmYWNlRXZhbHVhdG9yID0gRXZhbHVhdG9yO1xuIl0sIm5hbWVzIjpbIkFic3RyYWN0RXZhbHVhdG9yIiwiY29uc3RydWN0b3IiLCJmaWVsZEpzb24iLCJ0aGlzIiwiX2ZpZWxkSnNvbiIsIl9maWVsZElkIiwiaWQiLCJmaWVsZElkIiwiQWJzdHJhY3RTdWJmaWVsZEV2YWx1YXRvciIsInBhcnNlVmFsdWVzIiwidmFsdWVzIiwiczIiLCJwYXJzZVN1Ym1pdHRlZERhdGEiLCJzdWJtaXNzaW9uRGF0YSIsInNwbGl0IiwibWFwIiwiZmllbGQiLCJzdWJmaWVsZElkUmF3IiwidmFsdWVSYXciLCJzdWJmaWVsZElkIiwidHJpbSIsInZhbHVlIiwiZXZhbHVhdGVXaXRoVmFsdWVzIiwiczEiLCJBcnJheSIsImlzQXJyYXkiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyIiwiaSIsImEiLCJzdXBwb3J0ZWRTdWJmaWVsZElkcyIsImluY2x1ZGVzIiwiQWRkcmVzc0V2YWx1YXRvciIsIl9zdXBwb3J0ZWRTdWJmaWVsZElkcyIsIkV2YWx1YXRvciIsInN0YXRpYyIsInR5cGUiLCJOYW1lRXZhbHVhdG9yIiwiTWF0cml4RXZhbHVhdG9yIiwiUHJvZHVjdEV2YWx1YXRvciIsIk51bWVyaWNPbmx5RXZhbHVhdG9yIiwiTXVsdGlTZWxlY3RFdmFsdWF0b3IiLCJHZW5lcmljRXZhbHVhdG9yIiwiTm9uVmFsdWVFdmFsdWF0b3IiLCJGaWVsZFR5cGVVbmtub3duRXJyb3IiLCJzZWxlY3RlZE9wdGlvbiIsIm9wdGlvbnMiLCJmaW5kIiwib3B0aW9uIiwidW5kZWZpbmVkIiwiSW52YWxpZEV2YWx1YXRpb24iLCJzZWFyY2hWYWx1ZSIsImV2YWx1YXRlTXVsdGlTZWxlY3QiLCJOdW1iZXIiLCJtZXNzYWdlIiwicGF5bG9hZCIsIl9tZXNzYWdlIiwiX3BheWxvYWQiLCJFcnJvciIsImRlYnVnT2JqZWN0Iiwic3VwZXIiLCJfZGVidWdPYmplY3QiLCJuYW1lIiwiY29kZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sInNvdXJjZVJvb3QiOiIifQ==